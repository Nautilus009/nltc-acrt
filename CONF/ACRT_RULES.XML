<?xml version="1.0" encoding="UTF-8"?>
<ACRT>
  <Thresholds errors="0" warnings="50" infos="100"/>

  <Rules>

    <!-- REGEX: run on LOCAL-ONLY DIFF (Private - Master) to report newly introduced violations -->
    <Rule number="5.28" severity="E" run="Y"
          type="REGEX"
          on_master="N" on_local="N" on_diff="Y">
      <Description>Do not use STOP RUN</Description>
      <Code>(?:^|[^A-Z0-9-])STOP\s+RUN(?:[^A-Z0-9-]|$)</Code>
    </Rule>

    <!-- Count-based WARNING: evaluate on MASTER + LOCAL listings (program-level metric; not diff-based) -->
    <Rule number="5.32" severity="W" run="Y"
          type="MAX_SECTIONS" max="50"
          on_master="Y" on_local="Y" on_diff="N">
      <Description>Do not use more than 50 SECTIONs in one program.</Description>
      <Code></Code>
    </Rule>

    <!-- Count-based ERROR: mandatory sections must exist (evaluate on MASTER + LOCAL listings; not diff-based) -->
    <Rule number="2.22" severity="E" run="Y"
          type="REQUIRED_SECTIONS" required="A-MAIN,B-INIT,Z-FINISH"
          on_master="Y" on_local="Y" on_diff="N">
      <Description>The following sections are mandatory: A-MAIN, B-INIT, Z-FINISH</Description>
      <Code></Code>
    </Rule>

    <!-- Informational: all four divisions must exist (evaluate on MASTER + LOCAL listings; not diff-based) -->
    <Rule number="3.19" severity="I" run="Y"
          type="REQUIRED_DIVISIONS"
          required="IDENTIFICATION,ENVIRONMENT,DATA,PROCEDURE"
          on_master="Y" on_local="Y" on_diff="N">
      <Description>All four DIVISIONs must be declared in every program</Description>
      <Code></Code>
    </Rule>

    <!-- Source-level ERROR: there must not be any unused SECTIONs (evaluate on LOCAL source only; not listing/diff-based) -->
    <Rule number="5.1" severity="E" run="Y"
          type="UNUSED_SECTIONS" exclude="A-MAIN,I-DUMMY"
          on_master="N" on_local="Y" on_diff="N">
      <Description>There must not be any unused SECTIONs (every SECTION must be referenced by PERFORM or GO TO)</Description>
      <Code></Code>
    </Rule>

    <!-- Source-level ERROR: GO TO allowed only to same-SECTION EXIT paragraph (<PREFIX>-EX or <PREFIX>-EXIT) and EXIT paragraph must be EXIT-only (LOCAL source only) -->
    <Rule number="8.3" severity="E" run="Y"
          type="GOTO_EXIT_ONLY_SAME_SECTION"
          on_master="N" on_local="Y" on_diff="N">
      <Description>GO TO is permitted only to the EXIT paragraph of the same SECTION (and the EXIT paragraph must contain only EXIT)</Description>
      <Code></Code>
    </Rule>

    <!-- Source-level ERROR: PROGRAM-ID must match file name (without extension) (evaluate on LOCAL source only; not listing/diff-based) -->
    <Rule number="6.26" severity="E" run="Y"
          type="PROGRAM_ID_MATCH"
          on_master="N" on_local="Y" on_diff="N">
      <Description>PROGRAM-ID has to be identical to the file name (without the extension)</Description>
      <Code></Code>
    </Rule>

    <!-- Diff-based ERROR (REGEX): do not introduce EXIT SECTION (run on LOCAL-ONLY DIFF (Private - Master)) -->
    <Rule number="6.23" severity="E" run="Y"
          type="REGEX"
          on_master="N" on_local="N" on_diff="Y">
      <Description>Do not use the EXIT SECTION statement</Description>
      <Code>(?:^|[^A-Z0-9-])EXIT\s+SECTION(?:[^A-Z0-9-]|$)</Code>
    </Rule>

    <!-- Source-level ERROR: a paragraph name must be unique in the program (evaluate on LOCAL source only) -->
    <Rule number="3.22" severity="E" run="Y"
          type="UNIQUE_PARAGRAPHS"
          on_master="N" on_local="Y" on_diff="N">
      <Description>A paragraph name must be unique in the program</Description>
      <Code></Code>
    </Rule>

    <!-- Source-level ERROR: paragraph prefix must match the section containing it (evaluate on LOCAL source only) -->
    <Rule number="3.23" severity="E" run="Y"
          type="PARAGRAPH_PREFIX_MATCH"
          on_master="N" on_local="Y" on_diff="N">
      <Description>A paragraph name must have the same prefix as the section containing it</Description>
      <Code></Code>
    </Rule>

    <!-- Source-level ERROR: every EVALUATE must include WHEN OTHER (evaluate on LOCAL source only) -->
    <Rule number="8.1" severity="E" run="Y"
          type="EVALUATE_WHEN_OTHER"
          on_master="N" on_local="Y" on_diff="N">
      <Description>Use WHEN OTHER for every EVALUATE</Description>
      <Code></Code>
    </Rule>

  </Rules>
</ACRT>
